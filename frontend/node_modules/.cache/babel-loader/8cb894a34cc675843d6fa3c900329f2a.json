{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win11\\\\Desktop\\\\adopet\\\\frontend\\\\src\\\\contexts\\\\usercontext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, createContext } from 'react';\nimport useState from 'react-usestateref';\nimport Cookies from \"universal-cookie\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [currentUser, setCurrentUser, reff] = useState({});\n  console.log(\"from thfhytjyauthservice\");\n  const cookies = new Cookies();\n  const token = cookies.get(\"jwtoken\");\n\n  const checkLoggedIn = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/afterlogin\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      if (res.status === 401) {\n        const error = new Error(res.error);\n        throw error;\n      }\n\n      const data = await res.json();\n      setCurrentUser(data);\n      console.log(data);\n    } catch (err) {\n      console.log(err);\n      navigate(\"/login\");\n    }\n  };\n\n  useEffect(() => {\n    checkLoggedIn();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      currentUser,\n      setCurrentUser,\n      reff,\n      check\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserProvider, \"GhA8sYWC3+bRExfW9SRStzYrjOs=\", false, function () {\n  return [useNavigate];\n});\n\n_c = UserProvider;\nexport default UserContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","useEffect","createContext","useState","Cookies","useNavigate","UserContext","UserProvider","children","navigate","currentUser","setCurrentUser","reff","console","log","cookies","token","get","checkLoggedIn","res","fetch","method","headers","Accept","Authorization","status","error","Error","data","json","err","check"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/contexts/usercontext.js"],"sourcesContent":["import React, { useEffect, createContext } from 'react';\r\nimport useState from 'react-usestateref'\r\nimport Cookies from \"universal-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst UserContext = createContext();\r\n\r\nexport const UserProvider = ({ children }) => {\r\n\r\n\tconst navigate = useNavigate();\r\n\tconst [ currentUser, setCurrentUser,reff ] = useState({\t});\r\n\tconsole.log(\"from thfhytjyauthservice\");\r\n\tconst cookies = new Cookies();\r\n\tconst token = cookies.get(\"jwtoken\");\r\n\r\n\r\n\tconst checkLoggedIn = async () => {\r\n\t\t\t\r\n\r\n\t\ttry {\r\n\t\t\t\t\tconst res = await fetch(\"http://localhost:5000/afterlogin\", {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\tAccept: \"application/json\",\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t});\r\n\t\tif (res.status === 401) {\r\n  \r\n\t\t\tconst error = new Error(res.error);\r\n\t\t\tthrow error;\r\n\t\t  }\r\n\t\t\tconst data = await res.json();\r\n\t\t\t\r\n\t\t\tsetCurrentUser(data);\r\n\t\t\t console.log(data);\r\n\t\t\t  \r\n\t\t\t\r\n\t\t  } catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\tnavigate(\"/login\");\r\n\t\t\t\r\n\t\t\t\r\n\t\t  }\r\n\t};\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\r\n\t\tcheckLoggedIn();\r\n\t}, []);\r\n\r\n\t\r\n\treturn (\r\n\t\t<UserContext.Provider value={{currentUser, setCurrentUser,reff,check}}>\r\n\t\t\t{ children}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n};\r\n\r\n\r\nexport default UserContext;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,aAA3B,QAAgD,OAAhD;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AACA,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;AAEA,OAAO,MAAMK,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAE7C,MAAMC,QAAQ,GAAGJ,WAAW,EAA5B;EACA,MAAM,CAAEK,WAAF,EAAeC,cAAf,EAA8BC,IAA9B,IAAuCT,QAAQ,CAAC,EAAD,CAArD;EACAU,OAAO,CAACC,GAAR,CAAY,0BAAZ;EACA,MAAMC,OAAO,GAAG,IAAIX,OAAJ,EAAhB;EACA,MAAMY,KAAK,GAAGD,OAAO,CAACE,GAAR,CAAY,SAAZ,CAAd;;EAGA,MAAMC,aAAa,GAAG,YAAY;IAGjC,IAAI;MACD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kCAAD,EAAqC;QAC9DC,MAAM,EAAE,KADsD;QAE9DC,OAAO,EAAE;UACTC,MAAM,EAAE,kBADC;UAET,gBAAgB,kBAFP;UAGTC,aAAa,EAAG,UAASR,KAAM;QAHtB;MAFqD,CAArC,CAAvB;;MASH,IAAIG,GAAG,CAACM,MAAJ,KAAe,GAAnB,EAAwB;QAEvB,MAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUR,GAAG,CAACO,KAAd,CAAd;QACA,MAAMA,KAAN;MACE;;MACF,MAAME,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAAnB;MAEAlB,cAAc,CAACiB,IAAD,CAAd;MACCf,OAAO,CAACC,GAAR,CAAYc,IAAZ;IAGC,CArBH,CAqBI,OAAOE,GAAP,EAAY;MACfjB,OAAO,CAACC,GAAR,CAAYgB,GAAZ;MACArB,QAAQ,CAAC,QAAD,CAAR;IAGE;EACH,CA9BD;;EAkCAR,SAAS,CAAC,MAAM;IAGfiB,aAAa;EACb,CAJQ,EAIN,EAJM,CAAT;EAOA,oBACC,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAACR,WAAD;MAAcC,cAAd;MAA6BC,IAA7B;MAAkCmB;IAAlC,CAA7B;IAAA,UACGvB;EADH;IAAA;IAAA;IAAA;EAAA,QADD;AAKA,CAvDM;;GAAMD,Y;UAEKF,W;;;KAFLE,Y;AA0Db,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}