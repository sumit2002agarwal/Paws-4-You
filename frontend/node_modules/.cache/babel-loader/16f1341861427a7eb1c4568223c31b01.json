{"ast":null,"code":"import _objectSpread from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{motion}from\"framer-motion\";import{useEffect}from'react';import useState from'react-usestateref';import{useForm,useController}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import SvgComponent from'../assets/logo-no-background.png';import Cookies from\"universal-cookie\";import Button from\"./Button.js\";import axios from\"axios\";import Swal from'sweetalert2';import Header from\"./Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var bu=process.env.REACT_APP_BASEURL;var Payment=function Payment(){var navigate=useNavigate();var cookies=new Cookies();var _useState=useState([]),_useState2=_slicedToArray(_useState,3),data=_useState2[0],setuserdata=_useState2[1],ref=_useState2[2];var token=cookies.get(\"jwtoken\");var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,error,_data2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(bu,\"/afterlogin\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:res=_context.sent;if(!(res.status===401)){_context.next=7;break;}error=new Error(res.error);throw error;case 7:_context.next=9;return res.json();case 9:_data2=_context.sent;setuserdata(_data2);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);navigate(\"/login\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function login(){return _ref.apply(this,arguments);};}();useEffect(function(){login();},[]);var _useForm=useForm({mode:\"onBlur\",reValidateMode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var handleOpenRazorpay=function handleOpenRazorpay(data){var options={key:'rzp_test_rGxHmaYvQD7bhS',amount:Number(data.amount),currency:data.currency,order_id:data.id,name:'Paws4You',description:'Serving pets',handler:function handler(response){axios.post(\"\".concat(bu,\"/verify\"),{response:response}).then(function(res){Swal.fire({title:'Success!',text:'Login Successful',icon:'success',confirmButtonText:'Success',timer:'2000'});navigate(\"/userhome\");}).catch(function(err){});}};var rzp=new window.Razorpay(options);rzp.open();};var onSubmit=function onSubmit(data){var amount=data.amount;var _data={amount:amount};axios.post(\"\".concat(bu,\"/orders\"),_data).then(function(res){handleOpenRazorpay(res.data.data);}).catch(function(err){});};return/*#__PURE__*/_jsxs(_Fragment,{children:[ref.current.usertype===\"1\"&&navigate(\"/login\"),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(motion.section,{className:\"register\",initial:{width:0},animate:{width:\"100%\",transition:{duration:0.5}},exit:{x:window.innerWidth,transition:{duration:0.5}},children:[/*#__PURE__*/_jsx(\"img\",{src:SvgComponent,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Help us save mankind\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Enter Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:\"amount\",type:\"Number\"},register(\"amount\",{required:\"É necessário informar um endereço de email\"})),{},{placeholder:\"0.0\"})),errors.amount&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.amount.message||\"Por favor, verifique o email digitado\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Donate\"})]})]})]});};export default Payment;","map":{"version":3,"names":["motion","useEffect","useState","useForm","useController","useNavigate","SvgComponent","Cookies","Button","axios","Swal","Header","bu","process","env","REACT_APP_BASEURL","Payment","navigate","cookies","data","setuserdata","ref","token","get","login","fetch","method","headers","Accept","Authorization","res","status","error","Error","json","mode","reValidateMode","register","handleSubmit","errors","formState","handleOpenRazorpay","options","key","amount","Number","currency","order_id","id","name","description","handler","response","post","then","fire","title","text","icon","confirmButtonText","timer","catch","err","rzp","window","Razorpay","open","onSubmit","_data","current","usertype","width","transition","duration","x","innerWidth","required","message"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/Components/payment.js"],"sourcesContent":["\r\nimport { motion } from \"framer-motion\";\r\nimport {  useEffect} from 'react';\r\nimport useState from 'react-usestateref'\r\nimport { useForm,useController  } from \"react-hook-form\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport SvgComponent from '../assets/logo-no-background.png'\r\nimport Cookies from \"universal-cookie\";\r\nimport Button from \"./Button.js\";\r\nimport axios from \"axios\";\r\nimport Swal from 'sweetalert2'\r\nimport Header from \"./Header\";\r\nconst bu=process.env.REACT_APP_BASEURL\r\nconst Payment = () => {\r\n\r\n\tconst navigate = useNavigate();\r\n\tconst cookies = new Cookies();\r\n\r\n\tconst [data,setuserdata,ref]=useState([]);\r\n\tconst token = cookies.get(\"jwtoken\");\r\n  const login = async () => {\r\n\r\n    try {\r\n      const res = await fetch(`${bu}/afterlogin`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        \r\n      });\r\n     \r\n      if (res.status === 401) {\r\n      \r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n      const data = await res.json();\r\n     setuserdata(data)\r\n     \r\n     \r\n      \r\n    } catch (err) {\r\n      navigate(\"/login\");\r\n      \r\n     \r\n      \r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    login();\r\n    \r\n  }, []);\r\n\t\r\n\t\r\n\tconst {\r\n\t\tregister,\r\n\t\thandleSubmit,\r\n\t\tformState: { errors },\r\n\t\t\r\n\t} = useForm({\r\n\t\tmode: \"onBlur\",\r\n\t\treValidateMode: \"onChange\",\r\n\t});\r\n\r\n\tconst handleOpenRazorpay = (data) => {\r\n\r\n        const options = {\r\n            key:'rzp_test_rGxHmaYvQD7bhS',\r\n            amount: Number(data.amount),\r\n            currency: data.currency,\r\n            order_id: data.id,\r\n            name: 'Paws4You',\r\n            description: 'Serving pets',\r\n            handler: function (response) {\r\n               \r\n                axios.post(`${bu}/verify`, { response: response })\r\n                    .then(res => {\r\n                      \r\n                        Swal.fire({\r\n\t\t\t\t\t\t\ttitle: 'Success!',\r\n\t\t\t\t\t\t\ttext: 'Login Successful',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tconfirmButtonText: 'Success',\r\n\t\t\t\t\t\t\ttimer: '2000'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tnavigate(\"/userhome\");\r\n                    })\r\n                    .catch(err => {\r\n                      \r\n                    })\r\n            }\r\n\r\n        }\r\n        const rzp = new window.Razorpay(options)\r\n        rzp.open()\r\n\t\t\r\n    }\r\n\r\n\t   const onSubmit = (data) => {\r\n\t\tconst {amount}=data;\r\n        const _data = { amount: amount }\r\n        axios.post(`${bu}/orders`, _data)\r\n            .then(res => {\r\n              \r\n                handleOpenRazorpay(res.data.data)\r\n            })\r\n            .catch(err => {\r\n               \r\n            })\r\n    }\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t{ref.current.usertype===\"1\"&&navigate(\"/login\")}\r\n\t\t\t<Header/>\r\n\t\t\r\n\t\t<motion.section\r\n\r\n\t\t\tclassName=\"register\"\r\n\t\t\tinitial={{ width: 0 }}\r\n\t\t\tanimate={{ width: \"100%\", transition: { duration: 0.5 } }}\r\n\t\t\texit={{ x: window.innerWidth, transition: { duration: 0.5 } }}\r\n\t\t>\r\n\t\t\t<img src={SvgComponent} alt=\"\" />\r\n\t\t\t\r\n\t\t\t<p>Help us save mankind</p>\r\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n\r\n\t\t\t<label htmlFor=\"amount\">Enter Amount</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid=\"amount\"\r\n\t\t\t\t\ttype=\"Number\"\r\n\t\t\t\t\t{...register(\"amount\", {\r\n\t\t\t\t\t\trequired: \"É necessário informar um endereço de email\",\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t/>\r\n\t\t\t\t{errors.amount && (\r\n\t\t\t\t\t<p className=\"error\">\r\n\t\t\t\t\t\t{errors.amount.message || \"Por favor, verifique o email digitado\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Button type=\"submit\" children=\"Donate\" />\r\n\t\t\t\t\r\n\t\t\t</form>\r\n\t\t</motion.section>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Payment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}