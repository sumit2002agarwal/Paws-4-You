{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win11\\\\Desktop\\\\adopet\\\\frontend\\\\src\\\\contexts\\\\auth.js\",\n    _s = $RefreshSig$();\n\n// dependencies\nimport { createContext, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate(); // Num primeiro momento, usaremos dados fixos para o login/logout\n\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const recoveredUser = localStorage.getItem('user');\n\n    if (recoveredUser) {\n      setUser(JSON.parse(recoveredUser));\n    } // to avoid page loading without properly gathering the user info from localStorage, we must use a state to wait for it. When the data fetch is ended, then we set Loading to false and then we render the page (this last one is made on Routes file)\n\n\n    setLoading(false);\n  }, []);\n\n  const login = (email, password) => {\n    console.log('login auth', {\n      email,\n      password\n    }); // creating a session api\n\n    const loggedUser = {\n      id: '123',\n      email\n    }; // saving user on localStorage\n\n    localStorage.setItem('user', JSON.stringify(loggedUser));\n\n    if (password === '12345aA') {\n      setUser(loggedUser);\n      navigate('/home');\n    }\n  };\n\n  const logout = () => {\n    console.log('logout');\n    localStorage.removeItem('user');\n    setUser(null);\n    navigate('/');\n  }; // !!user:\n  // user != null, then authenticated = true\n  // user == null, then authenticated = false\n\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      authenticated: !!user,\n      user,\n      loading,\n      login,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"bMs6vkxBNdJdvAQTZITyVwx4nss=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","useNavigate","AuthContext","AuthProvider","children","navigate","user","setUser","loading","setLoading","recoveredUser","localStorage","getItem","JSON","parse","login","email","password","console","log","loggedUser","id","setItem","stringify","logout","removeItem","authenticated"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/contexts/auth.js"],"sourcesContent":["// dependencies\r\nimport { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const navigate = useNavigate();\r\n\r\n    // Num primeiro momento, usaremos dados fixos para o login/logout\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const recoveredUser = localStorage.getItem('user');\r\n\r\n        if (recoveredUser) {\r\n            setUser(JSON.parse(recoveredUser));\r\n        }\r\n\r\n        // to avoid page loading without properly gathering the user info from localStorage, we must use a state to wait for it. When the data fetch is ended, then we set Loading to false and then we render the page (this last one is made on Routes file)\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    const login = (email, password) => {\r\n        console.log('login auth', { email, password });\r\n\r\n        // creating a session api\r\n        const loggedUser = {\r\n            id: '123',\r\n            email\r\n        };\r\n\r\n        // saving user on localStorage\r\n        localStorage.setItem('user', JSON.stringify(loggedUser));\r\n\r\n        if (password === '12345aA') {\r\n            setUser(loggedUser);\r\n            navigate('/home');\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        console.log('logout');\r\n        localStorage.removeItem('user');\r\n        setUser(null);\r\n        navigate('/');\r\n    };\r\n\r\n    // !!user:\r\n    // user != null, then authenticated = true\r\n    // user == null, then authenticated = false\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ authenticated: !!user, user, loading, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n"],"mappings":";;;AAAA;AACA,SAASA,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;AAEP,OAAO,MAAMK,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC1C,MAAMC,QAAQ,GAAGJ,WAAW,EAA5B,CAD0C,CAG1C;;EACA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;EAEAC,SAAS,CAAC,MAAM;IACZ,MAAMU,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAtB;;IAEA,IAAIF,aAAJ,EAAmB;MACfH,OAAO,CAACM,IAAI,CAACC,KAAL,CAAWJ,aAAX,CAAD,CAAP;IACH,CALW,CAOZ;;;IACAD,UAAU,CAAC,KAAD,CAAV;EACH,CATQ,EASN,EATM,CAAT;;EAWA,MAAMM,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;IAC/BC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B;MAAEH,KAAF;MAASC;IAAT,CAA1B,EAD+B,CAG/B;;IACA,MAAMG,UAAU,GAAG;MACfC,EAAE,EAAE,KADW;MAEfL;IAFe,CAAnB,CAJ+B,CAS/B;;IACAL,YAAY,CAACW,OAAb,CAAqB,MAArB,EAA6BT,IAAI,CAACU,SAAL,CAAeH,UAAf,CAA7B;;IAEA,IAAIH,QAAQ,KAAK,SAAjB,EAA4B;MACxBV,OAAO,CAACa,UAAD,CAAP;MACAf,QAAQ,CAAC,OAAD,CAAR;IACH;EACJ,CAhBD;;EAkBA,MAAMmB,MAAM,GAAG,MAAM;IACjBN,OAAO,CAACC,GAAR,CAAY,QAAZ;IACAR,YAAY,CAACc,UAAb,CAAwB,MAAxB;IACAlB,OAAO,CAAC,IAAD,CAAP;IACAF,QAAQ,CAAC,GAAD,CAAR;EACH,CALD,CApC0C,CA2C1C;EACA;EACA;;;EAEA,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEqB,aAAa,EAAE,CAAC,CAACpB,IAAnB;MAAyBA,IAAzB;MAA+BE,OAA/B;MAAwCO,KAAxC;MAA+CS;IAA/C,CAA7B;IAAA,UACKpB;EADL;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH,CApDM;;GAAMD,Y;UACQF,W;;;KADRE,Y"},"metadata":{},"sourceType":"module"}