{"ast":null,"code":"import _slicedToArray from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// dependencies\nimport{createContext,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var navigate=useNavigate();// Num primeiro momento, usaremos dados fixos para o login/logout\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var recoveredUser=localStorage.getItem('user');if(recoveredUser){setUser(JSON.parse(recoveredUser));}// to avoid page loading without properly gathering the user info from localStorage, we must use a state to wait for it. When the data fetch is ended, then we set Loading to false and then we render the page (this last one is made on Routes file)\nsetLoading(false);},[]);var login=function login(email,password){console.log('login auth',{email:email,password:password});// creating a session api\nvar loggedUser={id:'123',email:email};// saving user on localStorage\nlocalStorage.setItem('user',JSON.stringify(loggedUser));if(password==='12345aA'){setUser(loggedUser);navigate('/home');}};var logout=function logout(){console.log('logout');localStorage.removeItem('user');setUser(null);navigate('/');};// !!user:\n// user != null, then authenticated = true\n// user == null, then authenticated = false\nreturn/*#__PURE__*/_jsx(AuthContext.Provider,{value:{authenticated:!!user,user:user,loading:loading,login:login,logout:logout},children:children});};/*\r\nO contexto é como se fosse uma memória central disponível para gravar certas informações globais, por exemplo, um usuário logado.\r\nEsse contexto deverá ser importado no arquivo de rotas e deve envolver todas as rotas que precisam ter acesso aos dados desse contexto. Usaremos o localStorage para armazenar os dados.\r\n*/","map":{"version":3,"names":["createContext","useState","useEffect","useNavigate","AuthContext","AuthProvider","children","navigate","user","setUser","loading","setLoading","recoveredUser","localStorage","getItem","JSON","parse","login","email","password","console","log","loggedUser","id","setItem","stringify","logout","removeItem","authenticated"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/contexts/auth.js"],"sourcesContent":["// dependencies\r\nimport { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const navigate = useNavigate();\r\n\r\n    // Num primeiro momento, usaremos dados fixos para o login/logout\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const recoveredUser = localStorage.getItem('user');\r\n\r\n        if (recoveredUser) {\r\n            setUser(JSON.parse(recoveredUser));\r\n        }\r\n\r\n        // to avoid page loading without properly gathering the user info from localStorage, we must use a state to wait for it. When the data fetch is ended, then we set Loading to false and then we render the page (this last one is made on Routes file)\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    const login = (email, password) => {\r\n        console.log('login auth', { email, password });\r\n\r\n        // creating a session api\r\n        const loggedUser = {\r\n            id: '123',\r\n            email\r\n        };\r\n\r\n        // saving user on localStorage\r\n        localStorage.setItem('user', JSON.stringify(loggedUser));\r\n\r\n        if (password === '12345aA') {\r\n            setUser(loggedUser);\r\n            navigate('/home');\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        console.log('logout');\r\n        localStorage.removeItem('user');\r\n        setUser(null);\r\n        navigate('/');\r\n    };\r\n\r\n    // !!user:\r\n    // user != null, then authenticated = true\r\n    // user == null, then authenticated = false\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ authenticated: !!user, user, loading, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n/*\r\nO contexto é como se fosse uma memória central disponível para gravar certas informações globais, por exemplo, um usuário logado.\r\nEsse contexto deverá ser importado no arquivo de rotas e deve envolver todas as rotas que precisam ter acesso aos dados desse contexto. Usaremos o localStorage para armazenar os dados.\r\n*/"],"mappings":"4HAAA;AACA,OAASA,aAAT,CAAwBC,QAAxB,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,2CAEA,MAAO,IAAMC,YAAW,cAAGJ,aAAa,EAAjC,CAEP,MAAO,IAAMK,aAAY,CAAG,QAAfA,aAAe,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC1C,GAAMC,SAAQ,CAAGJ,WAAW,EAA5B,CAEA;AACA,cAAwBF,QAAQ,CAAC,IAAD,CAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA,eAA8BR,QAAQ,CAAC,IAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eAEAT,SAAS,CAAC,UAAM,CACZ,GAAMU,cAAa,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAtB,CAEA,GAAIF,aAAJ,CAAmB,CACfH,OAAO,CAACM,IAAI,CAACC,KAAL,CAAWJ,aAAX,CAAD,CAAP,CACH,CAED;AACAD,UAAU,CAAC,KAAD,CAAV,CACH,CATQ,CASN,EATM,CAAT,CAWA,GAAMM,MAAK,CAAG,QAARA,MAAQ,CAACC,KAAD,CAAQC,QAAR,CAAqB,CAC/BC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0B,CAAEH,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAA1B,EAEA;AACA,GAAMG,WAAU,CAAG,CACfC,EAAE,CAAE,KADW,CAEfL,KAAK,CAALA,KAFe,CAAnB,CAKA;AACAL,YAAY,CAACW,OAAb,CAAqB,MAArB,CAA6BT,IAAI,CAACU,SAAL,CAAeH,UAAf,CAA7B,EAEA,GAAIH,QAAQ,GAAK,SAAjB,CAA4B,CACxBV,OAAO,CAACa,UAAD,CAAP,CACAf,QAAQ,CAAC,OAAD,CAAR,CACH,CACJ,CAhBD,CAkBA,GAAMmB,OAAM,CAAG,QAATA,OAAS,EAAM,CACjBN,OAAO,CAACC,GAAR,CAAY,QAAZ,EACAR,YAAY,CAACc,UAAb,CAAwB,MAAxB,EACAlB,OAAO,CAAC,IAAD,CAAP,CACAF,QAAQ,CAAC,GAAD,CAAR,CACH,CALD,CAOA;AACA;AACA;AAEA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEqB,aAAa,CAAE,CAAC,CAACpB,IAAnB,CAAyBA,IAAI,CAAJA,IAAzB,CAA+BE,OAAO,CAAPA,OAA/B,CAAwCO,KAAK,CAALA,KAAxC,CAA+CS,MAAM,CAANA,MAA/C,CAA7B,UACKpB,QADL,EADJ,CAKH,CApDM,CAsDP;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}