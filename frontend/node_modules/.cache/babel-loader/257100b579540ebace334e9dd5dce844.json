{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{Menu}from'@headlessui/react';import Cookies from\"universal-cookie\";import loggedUser from'../assets/usernew.png';import Button from'./Button';import Swal from'sweetalert2';import SvgComponent from'../assets/logo-no-background1.png';import Spinner from\"./Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var bu=process.env.REACT_APP_BASEURL;var Header=function Header(){var location=useLocation();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var navigate=useNavigate();var _useState3=useState({image:loggedUser}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setdata=_useState4[1];var _useState5=useState(\"/userhome\"),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];useEffect(function(){window.scrollTo(0,0);},[]);var cookies=new Cookies();var token=cookies.get(\"jwtoken\");var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),auth=_useState8[0],setauth=_useState8[1];var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,error,dataa;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(bu,\"/afterlogin\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:res=_context.sent;if(!(res.status===401)){_context.next=7;break;}error=new Error(res.error);throw error;case 7:_context.next=9;return res.json();case 9:dataa=_context.sent;setdata(dataa);setIsLoading(false);if(dataa.usertype==='1')setpage(\"/adminhome\");_context.next=17;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function login(){return _ref.apply(this,arguments);};}();var handlelogout=function handlelogout(){cookies.remove(\"jwtoken\",{path:\"/\"});Swal.fire({title:'Success!',text:'Logged Out Successfully',icon:'success',confirmButtonText:'Success',timer:'2000'});navigate(\"/login\");};useEffect(function(){login();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:isLoading&&(location.pathname==='/querypage'||data.usertype==='1'||location.pathname==='/profile'||location.pathname==='/payment'||location.pathname==='/userhome'||location.pathname==='/pets')&&/*#__PURE__*/_jsx(Spinner,{})||/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"header__logo\",src:SvgComponent,alt:\"\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(Link,{className:\"header__home\",\"aria-label\":\"Tela inicial\",to:page})]}),(location.pathname==='/querypage'||data.usertype==='1'||location.pathname==='/profile'||location.pathname==='/userhome'||location.pathname==='/pets')&&/*#__PURE__*/_jsxs(Menu,{children:[/*#__PURE__*/_jsx(Menu.Button,{className:\"menu__button\",children:/*#__PURE__*/_jsx(\"img\",{className:\"header__user\",src:data.image||loggedUser,alt:\"Usu\\xE1rio\"})}),/*#__PURE__*/_jsxs(Menu.Items,{className:\"menu__content\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"button\",href:\"/profile\",children:\"View Profile\"}),/*#__PURE__*/_jsx(Button,{handleClick:handlelogout,children:\"Logout\"})]})]})]})})});};export default Header;","map":{"version":3,"names":["useEffect","useState","Link","useLocation","useNavigate","Menu","Cookies","loggedUser","Button","Swal","SvgComponent","Spinner","bu","process","env","REACT_APP_BASEURL","Header","location","isLoading","setIsLoading","navigate","image","data","setdata","page","setpage","window","scrollTo","cookies","token","get","auth","setauth","login","fetch","method","headers","Accept","Authorization","res","status","error","Error","json","dataa","usertype","handlelogout","remove","path","fire","title","text","icon","confirmButtonText","timer","pathname"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/Components/Header.js"],"sourcesContent":["import {  useEffect, useState } from 'react';\r\nimport { Link, useLocation,useNavigate } from 'react-router-dom';\r\nimport { Menu } from '@headlessui/react';\r\nimport Cookies from \"universal-cookie\";\r\nimport loggedUser from '../assets/usernew.png';\r\nimport Button from './Button';\r\nimport Swal from 'sweetalert2'\r\nimport SvgComponent from '../assets/logo-no-background1.png'\r\nimport Spinner from \"./Spinner\"\r\nconst bu=process.env.REACT_APP_BASEURL\r\nconst Header = () => {\r\n  const location = useLocation();\r\n  \r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  const navigate = useNavigate();\r\n  const [data, setdata] = useState({\r\n    image:loggedUser,\r\n  });\r\nconst[page,setpage]=useState(\"/userhome\")\r\n\r\nuseEffect(() => {\r\n  window.scrollTo(0, 0)\r\n}, [])\r\n\r\n\r\n\r\n  const cookies = new Cookies();\r\n  const token = cookies.get(\"jwtoken\");\r\n  const[auth,setauth]=useState(false)\r\n\r\n  const login = async () => {\r\n   \r\n\r\n    try {\r\n      const res = await fetch(`${bu}/afterlogin`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        \r\n      });\r\n     \r\n      if (res.status === 401) {\r\n      \r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n      const dataa = await res.json();\r\n      \r\n      setdata(dataa);\r\n      setIsLoading(false)   \r\n      if(dataa.usertype === '1')\r\n      setpage(\"/adminhome\")\r\n     \r\n      \r\n    } catch (err) {\r\n     \r\n      \r\n     \r\n    }\r\n  };\r\n\r\n  const handlelogout = () => {\r\n   \r\n    cookies.remove(\"jwtoken\", { path: \"/\" });\r\n    Swal.fire({\r\n      title: 'Success!',\r\n      text: 'Logged Out Successfully',\r\n      icon: 'success',\r\n      confirmButtonText: 'Success',\r\n      timer: '2000'\r\n      })\r\n\r\n        navigate(\"/login\");\r\n       \r\n  };\r\n\r\n\r\n     \r\n\r\n  useEffect(() => {\r\n    login();\r\n    \r\n  }, []);\r\n\r\n\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <>\r\n    {(isLoading&&(location.pathname === '/querypage'||data.usertype === '1'||location.pathname === '/profile' || location.pathname === '/payment'|| location.pathname === '/userhome' || location.pathname === '/pets')&&<Spinner/>)||\r\n    <header className='header'>\r\n      <nav>\r\n        <div>\r\n          <img className='header__logo' src={SvgComponent} alt=\"\" aria-hidden='true' />\r\n          <Link className='header__home' aria-label='Tela inicial' to={page} ></Link>\r\n         \r\n        </div>\r\n        {(location.pathname === '/querypage'||data.usertype === '1'||location.pathname === '/profile'||location.pathname === '/userhome' || location.pathname === '/pets')&& \r\n        \r\n        <Menu>\r\n          <Menu.Button className=\"menu__button\">\r\n            <img className='header__user' src={data.image||loggedUser} alt=\"UsuÃ¡rio\" />\r\n          </Menu.Button>\r\n          <Menu.Items className='menu__content'>\r\n            <a className='button' href=\"/profile\">View Profile</a>\r\n            <Button handleClick={handlelogout} children=\"Logout\"></Button>\r\n          </Menu.Items>\r\n        </Menu>\r\n        \r\n        \r\n        \r\n        }\r\n      </nav>\r\n    </header>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;"],"mappings":"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"},"metadata":{},"sourceType":"module"}