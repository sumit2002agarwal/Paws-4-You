{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/win11/Desktop/adopet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import{Link}from\"react-router-dom\";import useState from'react-usestateref';import{motion}from'framer-motion';import{useNavigate}from\"react-router-dom\";import Header from\"../Header\";import loggedUser from'../../assets/usernew.png';import Cookies from\"universal-cookie\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var bu=process.env.REACT_APP_BASEURL;var Viewanimal=function Viewanimal(){var _useState=useState([{}]),_useState2=_slicedToArray(_useState,3),petsdata=_useState2[0],setpetsdata=_useState2[1],ref=_useState2[2];useEffect(function(){window.scrollTo(0,0);},[]);var getanimals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,error,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(bu,\"/getanimals\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;if(!(res.status===401)){_context.next=7;break;}error=new Error(res.error);throw error;case 7:_context.next=9;return res.json();case 9:data=_context.sent;setpetsdata(data);console.log(ref.current);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);navigate(\"/login\");case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function getanimals(){return _ref.apply(this,arguments);};}();var navigate=useNavigate();var cookies=new Cookies();var token=cookies.get(\"jwtoken\");var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,error,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(bu,\"/afterlogin\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:res=_context2.sent;if(!(res.status===401)){_context2.next=7;break;}error=new Error(res.error);throw error;case 7:_context2.next=9;return res.json();case 9:data=_context2.sent;console.log(data);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);navigate(\"/login\");case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function login(){return _ref2.apply(this,arguments);};}();var handleclick1=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(elem,idx){var res,error;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(bu,\"/deleteanimal/\").concat(elem._id),{method:\"DELETE\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context3.sent;if(!(res.status===401)){_context3.next=7;break;}error=new Error(res.error);throw error;case 7:Swal.fire({title:'Success!',text:'Pet Deleted',icon:'success',confirmButtonText:'Success',timer:'2000'});getanimals();_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);Swal.fire({title:'Error!',text:'Deletion Failed',icon:'error',confirmButtonText:'Retry'});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function handleclick1(_x,_x2){return _ref3.apply(this,arguments);};}();var handleclick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(elem,idx){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:Swal.fire({title:'Are you sure?',text:\"You won't be able to revert this!\",type:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'Confirm!'}).then(function(result){if(result.dismiss!=='cancel'){handleclick1(elem,idx);}});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function handleclick(_x3,_x4){return _ref4.apply(this,arguments);};}();useEffect(function(){login();getanimals();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(motion.section,{className:\"home\",initial:{width:0},animate:{width:\"auto\",transition:{duration:0.5}},exit:{x:window.innerWidth,transition:{duration:0.5}},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Hello! \",/*#__PURE__*/_jsx(\"br\",{}),\" These are the animals available!\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"cards\",children:ref.current.map(function(pet,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:pet.img||loggedUser}),/*#__PURE__*/_jsx(\"h4\",{children:pet.name}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:pet.age}),/*#__PURE__*/_jsx(\"li\",{children:pet.size}),/*#__PURE__*/_jsx(\"li\",{children:pet.behaviour})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card__city\",children:pet.city}),/*#__PURE__*/_jsx(Link,{className:\"card__contact\",to:\"/editanimal\",state:pet,children:\"Edit the animal details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cpb\",onClick:function onClick(){handleclick(pet,i);},children:\"Delete\"})]},i);})})]})]});};export default Viewanimal;","map":{"version":3,"names":["React","useEffect","Link","useState","motion","useNavigate","Header","loggedUser","Cookies","Swal","bu","process","env","REACT_APP_BASEURL","Viewanimal","petsdata","setpetsdata","ref","window","scrollTo","getanimals","fetch","method","headers","Accept","res","status","error","Error","json","data","console","log","current","navigate","cookies","token","get","login","Authorization","handleclick1","elem","idx","_id","fire","title","text","icon","confirmButtonText","timer","handleclick","type","showCancelButton","confirmButtonColor","cancelButtonColor","then","result","dismiss","width","transition","duration","x","innerWidth","map","pet","i","img","name","age","size","behaviour","city"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/Components/adminPages/viewanimal.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useState from 'react-usestateref'\r\nimport { motion } from 'framer-motion';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Header from \"../Header\";\r\nimport loggedUser from '../../assets/usernew.png';\r\nimport Cookies from \"universal-cookie\";\r\nimport Swal from 'sweetalert2'\r\n\r\nconst bu=process.env.REACT_APP_BASEURL\r\n\r\nconst Viewanimal = () => {\r\n    const [petsdata,setpetsdata,ref]=useState([{}]);\r\n\r\n    useEffect(() => {\r\n      window.scrollTo(0, 0)\r\n    }, [])\r\n    const getanimals = async () => {\r\n\r\n        try {\r\n          const res = await fetch(`${bu}/getanimals`, {\r\n            method: \"GET\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            \r\n          });\r\n         \r\n          if (res.status === 401) {\r\n          \r\n            const error = new Error(res.error);\r\n            throw error;\r\n          }\r\n          const data = await res.json();\r\n          setpetsdata(data);\r\n          console.log(ref.current);\r\n          \r\n          \r\n        } catch (err) {\r\n          navigate(\"/login\");\r\n          \r\n        }\r\n      };\r\n\r\n    \r\n\r\n\r\n\r\n\r\n  const navigate = useNavigate();\r\n  const cookies = new Cookies();\r\n  const token = cookies.get(\"jwtoken\");\r\n  const login = async () => {\r\n\r\n    try {\r\n      const res = await fetch(`${bu}/afterlogin`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        \r\n      });\r\n     \r\n      if (res.status === 401) {\r\n      \r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n      const data = await res.json();\r\n      console.log(data);\r\n      \r\n      \r\n    } catch (err) {\r\n      navigate(\"/login\");\r\n      \r\n     \r\n      \r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleclick1 =async (elem, idx) => {\r\n   \r\n   \r\n    try {\r\n      const res = await fetch(`${bu}/deleteanimal/${elem._id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        \r\n      });\r\n     \r\n      if (res.status === 401) {\r\n      \r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n      Swal.fire({\r\n\t\t\t\ttitle: 'Success!',\r\n\t\t\t\ttext: 'Pet Deleted',\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\tconfirmButtonText: 'Success',\r\n\t\t\t\ttimer: '2000'\r\n\t\t\t\t})\r\n      getanimals();\r\n      \r\n    } catch (err) {\r\n      Swal.fire({\r\n\t\t\t\ttitle: 'Error!',\r\n\t\t\t\ttext: 'Deletion Failed',\r\n\t\t\t\ticon: 'error',\r\n\t\t\t\tconfirmButtonText: 'Retry'\r\n\t\t\t\t})\r\n      \r\n    }\r\n};\r\n\r\n  const handleclick =async (elem, idx) => {\r\n\r\n\r\n    Swal.fire({\r\n      title: 'Are you sure?',\r\n      text: \"You won't be able to revert this!\",\r\n      type: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Confirm!'\r\n  }).then((result) => {\r\n    if (result.dismiss !== 'cancel') {\r\n\r\n      handleclick1(elem,idx);\r\n    }\r\n  \r\n})\r\n\r\n\r\n  };\r\n\r\n  useEffect(() => {\r\n    login();\r\n    getanimals();\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <>\r\n       <Header/>\r\n  \r\n    <motion.section className='home' initial={{ width: 0 }} animate={{ width: \"auto\", transition: { duration: 0.5 } }} exit={{ x: window.innerWidth, transition: { duration: 0.5 } }}>\r\n      <p>Hello! <br /> These are the animals available!</p>\r\n      <div className='cards'>\r\n        {\r\n          ref.current.map((pet, i) => (\r\n            <div key={i} className='card'>\r\n            <img src={pet.img||loggedUser} />\r\n            <h4>{pet.name}</h4>\r\n            <ul>\r\n              <li>{pet.age}</li>\r\n              <li>{pet.size}</li>\r\n              <li>{pet.behaviour}</li>\r\n                \r\n              </ul>\r\n            \r\n              <p className='card__city'>{pet.city}</p>\r\n              <Link className='card__contact' to=\"/editanimal\" state={pet}>Edit the animal details</Link>\r\n              <button className='cpb' onClick={() => { handleclick(pet, i); }}>Delete</button>\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n    </motion.section >\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Viewanimal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}