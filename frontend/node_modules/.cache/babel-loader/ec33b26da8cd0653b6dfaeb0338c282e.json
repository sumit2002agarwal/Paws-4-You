{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win11\\\\Desktop\\\\adopet\\\\frontend\\\\src\\\\contexts\\\\usercontext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext } from 'react';\nimport Cookies from \"universal-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [currentUser, setCurrentUser] = useState({\n    name: null,\n    email: null\n  });\n  console.log(\"from thfhytjyauthservice\");\n  const cookies = new Cookies();\n  const token = cookies.get(\"jwtoken\");\n  useEffect(() => {\n    const checkLoggedIn = async () => {\n      try {\n        const res = await fetch(\"http://localhost:5000/afterlogin\", {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n\n        if (res.status === 401) {\n          const error = new Error(res.error);\n          throw error;\n        }\n\n        const data = await res.json();\n        const em = data.email;\n        const nam = data.name;\n        setCurrentUser({\n          name: nam,\n          email: em\n        });\n      } catch (err) {\n        console.log(err);\n        navigate(\"/login\");\n      }\n    };\n\n    checkLoggedIn();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      currentUser,\n      setCurrentUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserProvider, \"IZ5SPj+GSzaEmXdG/5zbHMsX+ak=\");\n\n_c = UserProvider;\nexport default UserContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","useState","useEffect","createContext","Cookies","UserContext","UserProvider","children","currentUser","setCurrentUser","name","email","console","log","cookies","token","get","checkLoggedIn","res","fetch","method","headers","Accept","Authorization","status","error","Error","data","json","em","nam","err","navigate"],"sources":["C:/Users/win11/Desktop/adopet/frontend/src/contexts/usercontext.js"],"sourcesContent":["import React, { useState, useEffect, createContext } from 'react';\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst UserContext = createContext();\r\n\r\nexport const UserProvider = ({ children }) => {\r\n\tconst [ currentUser, setCurrentUser ] = useState({\r\n\t\tname: null,\r\n    email: null,\r\n\r\n\t});\r\n\tconsole.log(\"from thfhytjyauthservice\");\r\n\tconst cookies = new Cookies();\r\n\tconst token = cookies.get(\"jwtoken\");\r\n\tuseEffect(() => {\r\n\t\tconst checkLoggedIn = async () => {\r\n\t\t\t\r\n\r\n\t\t\ttry {\r\n\t\t\t\t\t\tconst res = await fetch(\"http://localhost:5000/afterlogin\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tif (res.status === 401) {\r\n      \r\n\t\t\t\tconst error = new Error(res.error);\r\n\t\t\t\tthrow error;\r\n\t\t\t  }\r\n\t\t\t\tconst data = await res.json();\r\n\t\t\t\tconst em=data.email;\r\n\t\t\t\tconst nam=data.name;\r\n\t\t\t\tsetCurrentUser({\r\n\r\n\t\t\t\t\t\tname: nam,\r\n                       email: em,\r\n\t\t\t\t\t});\r\n\t\t\t\t \r\n\t\t\t\t  \r\n\t\t\t\t\r\n\t\t\t  } catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n                navigate(\"/login\");\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t  }\r\n\t\t};\r\n\r\n\t\tcheckLoggedIn();\r\n\t}, []);\r\n\r\n\t\r\n\treturn (\r\n\t\t<UserContext.Provider value={{currentUser, setCurrentUser}}>\r\n\t\t\t{ children}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n};\r\n\r\n\r\nexport default UserContext;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,aAArC,QAA0D,OAA1D;AACA,OAAOC,OAAP,MAAoB,kBAApB;;AAEA,MAAMC,WAAW,gBAAGF,aAAa,EAAjC;AAEA,OAAO,MAAMG,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC7C,MAAM,CAAEC,WAAF,EAAeC,cAAf,IAAkCR,QAAQ,CAAC;IAChDS,IAAI,EAAE,IAD0C;IAE9CC,KAAK,EAAE;EAFuC,CAAD,CAAhD;EAKAC,OAAO,CAACC,GAAR,CAAY,0BAAZ;EACA,MAAMC,OAAO,GAAG,IAAIV,OAAJ,EAAhB;EACA,MAAMW,KAAK,GAAGD,OAAO,CAACE,GAAR,CAAY,SAAZ,CAAd;EACAd,SAAS,CAAC,MAAM;IACf,MAAMe,aAAa,GAAG,YAAY;MAGjC,IAAI;QACD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kCAAD,EAAqC;UAC9DC,MAAM,EAAE,KADsD;UAE9DC,OAAO,EAAE;YACTC,MAAM,EAAE,kBADC;YAET,gBAAgB,kBAFP;YAGTC,aAAa,EAAG,UAASR,KAAM;UAHtB;QAFqD,CAArC,CAAvB;;QASH,IAAIG,GAAG,CAACM,MAAJ,KAAe,GAAnB,EAAwB;UAEvB,MAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUR,GAAG,CAACO,KAAd,CAAd;UACA,MAAMA,KAAN;QACE;;QACF,MAAME,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAAnB;QACA,MAAMC,EAAE,GAACF,IAAI,CAAChB,KAAd;QACA,MAAMmB,GAAG,GAACH,IAAI,CAACjB,IAAf;QACAD,cAAc,CAAC;UAEbC,IAAI,EAAEoB,GAFO;UAGInB,KAAK,EAAEkB;QAHX,CAAD,CAAd;MAQE,CA1BH,CA0BI,OAAOE,GAAP,EAAY;QACfnB,OAAO,CAACC,GAAR,CAAYkB,GAAZ;QACYC,QAAQ,CAAC,QAAD,CAAR;MAGV;IACH,CAnCD;;IAqCAf,aAAa;EACb,CAvCQ,EAuCN,EAvCM,CAAT;EA0CA,oBACC,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAACT,WAAD;MAAcC;IAAd,CAA7B;IAAA,UACGF;EADH;IAAA;IAAA;IAAA;EAAA,QADD;AAKA,CAxDM;;GAAMD,Y;;KAAAA,Y;AA2Db,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}